<x-app-layout>
    <x-slot name="header">
        <h2 class="font-semibold text-xl text-gray-800 leading-tight">
            {{ __('Productos') }}
        </h2>
    </x-slot>

    <div class="py-12">
        <div class="max-w-7xl mx-auto sm:px-6 lg:px-8">
            <div class="bg-white overflow-hidden shadow-sm sm:rounded-lg">
                <div class="p-6 bg-white border-b border-gray-200">
                    <table class="w-full table-auto"  id="dt-table">
                        <thead>
                          <tr class="text-left">
                            <th>Nombre</th>
                            <th>Email</th>
                            <th>Telefono</th>
                            <th>Fuente</th>
                            <th>Estatus</th>
                            <th>Fecha</th>
                            <th class="text-right">...</th>
                          </tr>
                        </thead>
                        <tbody>
                            @foreach($leads as $l)
                                <tr>
                                    <td>{{$l->name}}</td>
                                    <td>{{$l->email}}</td>
                                    <td>{{$l->phone}}</td>
                                    <td><a class="text-blue-700 hover:text-blue-900 text-xm" href="{{url($l->source)}}">
                                        {{$l->source}}
                                        </a>
                                    </td>
                                    <td>
                                        @if($l->status == 'new')
                                            <span class="bg-green-500 text-white rounded-xl text-xs px-2">{{$l->status}}</span>
                                        @else 
                                            <span class="bg-blue-500 text-white rounded-xl text-xs  px-2">{{$l->status}}</span>
                                        @endif
                                    </td>
                                    <td>
                                        {{$l->created_at}}
                                    </td>
                                    <td class="text-right">
                                        <div class="flex justify-end space-x-3">
                                            <form action="{{route('lead.contacted', $l)}}" method="post">
                                                @csrf
                                                @method('PUT')
                                                <button type="submit" class="px-3 bg-blue-500 text-white rounded-md opacity-50 hover:opacity-100">
                                                    <svg width="25" height="25" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                        <path d="M1.5625 7.42188C1.5625 5.9125 2.7875 4.6875 4.29688 4.6875H20.7031C22.2125 4.6875 23.4375 5.9125 23.4375 7.42188V17.5781C23.4375 18.3033 23.1494 18.9988 22.6366 19.5116C22.1238 20.0244 21.4283 20.3125 20.7031 20.3125H4.29688C3.57167 20.3125 2.87617 20.0244 2.36338 19.5116C1.85059 18.9988 1.5625 18.3033 1.5625 17.5781V7.42188ZM8.22031 12.0531C8.49876 12.0531 8.77447 11.9983 9.03172 11.8917C9.28897 11.7852 9.52271 11.629 9.7196 11.4321C9.91649 11.2352 10.0727 11.0015 10.1792 10.7442C10.2858 10.487 10.3406 10.2113 10.3406 9.93281C10.3406 9.65437 10.2858 9.37865 10.1792 9.1214C10.0727 8.86416 9.91649 8.63041 9.7196 8.43353C9.52271 8.23664 9.28897 8.08045 9.03172 7.9739C8.77447 7.86734 8.49876 7.8125 8.22031 7.8125C7.65797 7.8125 7.11866 8.03589 6.72102 8.43353C6.32339 8.83116 6.1 9.37047 6.1 9.93281C6.1 10.4952 6.32339 11.0345 6.72102 11.4321C7.11866 11.8297 7.65797 12.0531 8.22031 12.0531V12.0531ZM6.02813 13.1125C5.67257 13.1125 5.33158 13.2537 5.08016 13.5052C4.82874 13.7566 4.6875 14.0976 4.6875 14.4531C4.68755 15.035 4.88211 15.6002 5.24024 16.0588C5.59837 16.5175 6.09953 16.8433 6.66406 16.9844L6.74687 17.0062C7.71562 17.2484 8.72656 17.2484 9.69375 17.0062L9.77812 16.9859C10.3427 16.8448 10.8438 16.519 11.2019 16.0604C11.5601 15.6018 11.7546 15.0366 11.7547 14.4547C11.7549 14.2785 11.7204 14.104 11.6531 13.9412C11.5858 13.7783 11.4871 13.6304 11.3626 13.5057C11.2381 13.3811 11.0902 13.2822 10.9275 13.2147C10.7647 13.1472 10.5902 13.1125 10.4141 13.1125H6.02813ZM14.8438 9.375C14.6365 9.375 14.4378 9.45731 14.2913 9.60382C14.1448 9.75034 14.0625 9.94905 14.0625 10.1562C14.0625 10.3635 14.1448 10.5622 14.2913 10.7087C14.4378 10.8552 14.6365 10.9375 14.8438 10.9375H19.5312C19.7385 10.9375 19.9372 10.8552 20.0837 10.7087C20.2302 10.5622 20.3125 10.3635 20.3125 10.1562C20.3125 9.94905 20.2302 9.75034 20.0837 9.60382C19.9372 9.45731 19.7385 9.375 19.5312 9.375H14.8438ZM14.8438 14.0625C14.6365 14.0625 14.4378 14.1448 14.2913 14.2913C14.1448 14.4378 14.0625 14.6365 14.0625 14.8438C14.0625 15.051 14.1448 15.2497 14.2913 15.3962C14.4378 15.5427 14.6365 15.625 14.8438 15.625H19.5312C19.7385 15.625 19.9372 15.5427 20.0837 15.3962C20.2302 15.2497 20.3125 15.051 20.3125 14.8438C20.3125 14.6365 20.2302 14.4378 20.0837 14.2913C19.9372 14.1448 19.7385 14.0625 19.5312 14.0625H14.8438Z" fill="white"/>
                                                        </svg>
                                                </button>
                                            </form>
                                            <form action="{{route('lead.delete', $l)}}" method="post">
                                                @csrf
                                                @method('DELETE')
                                                <button type="submit" class="px-3 bg-red-500 text-white rounded-md opacity-50 hover:opacity-100">
                                                    Archivar
                                                </button>
                                            </form>
                                        </div> 
                                    </td>
                                </tr>
                            @endforeach
                        </tbody>
                      </table>
                </div>
            </div>
        </div>
    </div>
</x-app-layout>
